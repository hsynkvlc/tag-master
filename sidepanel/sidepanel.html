<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tag Master - Professional Audit Toolkit</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div id="app" class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-title">
        <img src="../assets/icons/icon48.png" alt="Tag Master"
          style="min-width:calc(20px * var(--font-scale)); width:calc(20px * var(--font-scale)); height:calc(20px * var(--font-scale))">
        <div style="display:flex;flex-direction:column;line-height:1.1">
          <span style="font-size:calc(13px * var(--font-scale));font-weight:700">Tag <span
              style="color:var(--google-blue)">Master</span></span>
          <span
            style="font-size:calc(9px * var(--font-scale));font-style:italic;color:var(--text-secondary);font-weight:400">üíç
            One Extension to Rule Them All</span>
        </div>
      </div>
      <div class="header-actions">
        <button class="btn-icon" id="themeToggle" title="Toggle Light/Dark Mode">
          <svg class="sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            style="width:16px;height:16px;display:none">
            <circle cx="12" cy="12" r="5" />
            <line x1="12" y1="1" x2="12" y2="3" />
            <line x1="12" y1="21" x2="12" y2="23" />
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
            <line x1="1" y1="12" x2="3" y2="12" />
            <line x1="21" y1="12" x2="23" y2="12" />
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
          </svg>
          <svg class="moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            style="width:16px;height:16px">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </button>
        <button class="btn-icon" id="openSettings" title="Settings">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3" />
            <path
              d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
          </svg>
        </button>
      </div>
    </header>


    <!-- Tabs -->
    <div class="tabs">
      <!-- GTM - standalone -->
      <button class="tab active" data-tab="gtm">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" />
          <line x1="7" y1="7" x2="7.01" y2="7" />
        </svg>
        <span>GTM</span>
      </button>

      <!-- Monitor group -->
      <div class="tab-group">
        <button class="tab tab-group-trigger" data-group="monitor">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 2 7 12 12 22 7 12 2" />
            <polyline points="2 17 12 22 22 17" />
            <polyline points="2 12 12 17 22 12" />
          </svg>
          <span>Monitor</span>
          <svg class="tab-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            style="width:10px;height:10px">
            <polyline points="6 9 12 15 18 9" />
          </svg>
        </button>
        <div class="tab-dropdown">
          <button class="tab-dropdown-item" data-tab="monitor">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="12 2 2 7 12 12 22 7 12 2" />
              <polyline points="2 17 12 22 22 17" />
              <polyline points="2 12 12 17 22 12" />
            </svg>
            Events
          </button>
          <button class="tab-dropdown-item" data-tab="network">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" />
              <line x1="2" y1="12" x2="22" y2="12" />
              <path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z" />
            </svg>
            Network
          </button>
        </div>
      </div>

      <!-- Inspect group -->
      <div class="tab-group">
        <button class="tab tab-group-trigger" data-group="inspect">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
            <polyline points="22 4 12 14.01 9 11.01" />
          </svg>
          <span>Inspect</span>
          <svg class="tab-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            style="width:10px;height:10px">
            <polyline points="6 9 12 15 18 9" />
          </svg>
        </button>
        <div class="tab-dropdown">
          <button class="tab-dropdown-item" data-tab="audit">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
              <polyline points="22 4 12 14.01 9 11.01" />
            </svg>
            Audit
          </button>
          <button class="tab-dropdown-item" data-tab="cookies">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" />
              <path d="M12 2a10 10 0 0 1 10 10" />
              <path d="M12 22a10 10 0 0 1-10-10" />
              <path d="M16 8v0" />
              <path d="M9 12v0" />
              <path d="M14 15v0" />
            </svg>
            Cookies
          </button>
          <button class="tab-dropdown-item" data-tab="consent">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
            </svg>
            Consent
          </button>
          <button class="tab-dropdown-item" data-tab="push">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13" />
              <polygon points="22 2 15 22 11 13 2 9 22 2" />
            </svg>
            Tools
          </button>
        </div>
      </div>

      <!-- Tech - standalone -->
      <button class="tab" data-tab="tech">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="4" y="4" width="16" height="16" rx="2" ry="2" />
          <rect x="9" y="9" width="6" height="6" />
          <line x1="9" y1="1" x2="9" y2="4" />
          <line x1="15" y1="1" x2="15" y2="4" />
          <line x1="9" y1="20" x2="9" y2="23" />
          <line x1="15" y1="20" x2="15" y2="23" />
          <line x1="20" y1="9" x2="23" y2="9" />
          <line x1="20" y1="14" x2="23" y2="14" />
          <line x1="1" y1="9" x2="4" y2="9" />
          <line x1="1" y1="14" x2="4" y2="14" />
        </svg>
        <span>Tech</span>
      </button>

      <!-- Support - standalone -->
      <button class="tab" data-tab="about">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path
            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.84-8.84 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
        </svg>
        <span>Support</span>
      </button>
    </div>

    <!-- Welcome Overlay -->
    <div id="welcomeOverlay"
      style="display: flex; position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background: var(--bg-primary); z-index: 9999; flex-direction: column; padding: 30px; text-align: center; justify-content: center; align-items: center;">
      <div
        style="width:64px;height:64px;border-radius:12px;display:flex;align-items:center;justify-content:center;margin-bottom:24px;background:var(--bg-surface)">
        <img src="../assets/icons/icon48.png" alt="Tag Master" style="width:40px;height:40px">
      </div>
      <h1 style="font-size:20px;font-weight:700;margin-bottom:8px;color:var(--text-primary);">Google Swiss Knife</h1>
      <p style="color:var(--text-secondary);font-size:13px;line-height:1.5;margin-bottom:32px;">Your all-in-one digital
        analytics companion.</p>

      <div
        style="display:grid;grid-template-columns:1fr;gap:12px;width:100%;max-width:280px;text-align:left;margin-bottom:32px">
        <div
          style="display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg-surface);border-radius:8px;border:1px solid var(--border)">
          <div
            style="width:32px;height:32px;border-radius:6px;background:var(--bg-elevated);display:flex;align-items:center;justify-content:center;border:1px solid var(--border)">
            <svg viewBox="0 0 24 24" fill="none" stroke="var(--google-blue)" stroke-width="2"
              style="width:16px;height:16px">
              <path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"></path>
              <line x1="7" y1="7" x2="7.01" y2="7"></line>
            </svg>
          </div>
          <div>
            <div style="font-size:12px;font-weight:600;color:var(--text-primary)">GTM Injector</div>
            <div style="font-size:11px;color:var(--text-muted)">Inject GTM containers easily.</div>
          </div>
        </div>
        <div
          style="display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg-surface);border-radius:8px;border:1px solid var(--border)">
          <div
            style="width:32px;height:32px;border-radius:6px;background:var(--bg-elevated);display:flex;align-items:center;justify-content:center;border:1px solid var(--border)">
            <svg viewBox="0 0 24 24" fill="none" stroke="var(--google-red)" stroke-width="2"
              style="width:16px;height:16px">
              <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
              <polyline points="2 17 12 22 22 17"></polyline>
              <polyline points="2 12 12 17 22 12"></polyline>
            </svg>
          </div>
          <div>
            <div style="font-size:12px;font-weight:600;color:var(--text-primary)">DataLayer Monitor</div>
            <div style="font-size:11px;color:var(--text-muted)">Real-time event tracking.</div>
          </div>
        </div>
        <div
          style="display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg-surface);border-radius:8px;border:1px solid var(--border)">
          <div
            style="width:32px;height:32px;border-radius:6px;background:var(--bg-elevated);display:flex;align-items:center;justify-content:center;border:1px solid var(--border)">
            <svg viewBox="0 0 24 24" fill="none" stroke="var(--accent-blue)" stroke-width="2"
              style="width:16px;height:16px">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
          </div>
          <div>
            <div style="font-size:12px;font-weight:600;color:var(--text-primary)">Privacy Audit</div>
            <div style="font-size:11px;color:var(--text-muted)">Check GDPR/CCPA compliance.</div>
          </div>
        </div>
      </div>

      <button id="getStartedBtn" class="btn"
        style="width:100%;max-width:280px;padding:12px;background:var(--google-blue);color:white;border:none;border-radius:8px;font-weight:600;font-size:13px;cursor:pointer;transition:background 0.2s">
        Get Started
      </button>
      <div style="margin-top:24px;font-size:10px;color:var(--text-muted)">v1.2.1</div>
    </div>

    <!-- Content -->
    <div class="content">
      <!-- GTM Injector Panel -->
      <div class="panel active" id="panel-gtm">
        <div class="section">
          <div class="section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px">
              <path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" />
              <line x1="7" y1="7" x2="7.01" y2="7" />
            </svg>
            GTM Snippet Injector
          </div>
          <div class="container-item"
            style="flex-direction:column;align-items:center;gap:12px;padding:16px;background:linear-gradient(135deg, rgba(66, 133, 244, 0.06) 0%, rgba(147, 52, 233, 0.06) 100%);border:3px solid rgba(66, 133, 244, 0.35);border-radius:12px">
            <div style="width:100%;text-align:center">
              <div
                style="font-size:12px;color:var(--text-primary);margin-bottom:4px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:6px">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:14px;height:14px;color:var(--google-blue)">
                  <polyline points="16 18 22 12 16 6"></polyline>
                  <polyline points="8 6 2 12 8 18"></polyline>
                </svg>
                Paste GTM Snippet
              </div>
              <div
                style="font-size:10px;color:var(--text-muted);text-align:center;margin-bottom:10px;font-style:italic">
                ƒ∞nject GTM Here</div>
              <textarea class="input" id="gtmSnippetInput" placeholder="<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];...
})(window,document,'script','dataLayer','GTM-XXXXX');</script>
<!-- End Google Tag Manager -->"
                style="width:100%;min-height:160px;font-family:monospace;font-size:11px;resize:vertical;text-align:left;box-sizing:border-box"></textarea>
              <div id="snippetStatus" style="margin-top:6px;font-size:11px;color:var(--text-muted)"></div>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;width:100%">
              <label class="checkbox-container">
                <input type="checkbox" id="overrideExisting">
                <span class="checkbox-label">Persistent</span>
              </label>
              <label class="checkbox-container">
                <input type="checkbox" id="previewMode">
                <span class="checkbox-label">Debug Mode</span>
              </label>
            </div>
            <button class="btn" id="injectBtn" style="width:100%;gap:8px;font-weight:700">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="width:14px;height:14px">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              <strong>Inject GTM</strong> Snippet
            </button>
          </div>
        </div>

        <div class="section" id="injectedSection" style="display:none">
          <div class="section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
            Active Injections
          </div>
          <div id="injectedList" class="container-list"></div>
        </div>

        <div class="section">
          <div class="section-header">
            <div class="section-title">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="width:16px;height:16px">
                <path
                  d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                </path>
              </svg>
              Detected Containers
            </div>
            <button class="btn-icon" id="refreshContainers" title="Refresh">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
              </svg>
            </button>
          </div>
          <div id="containerList" class="container-list">
            <div class="empty-state">
              <p>Scanning for GTM/GA4 containers...</p>
            </div>
          </div>
        </div>

        <div style="margin-top:auto;padding:16px;text-align:center">
          <a href="#" id="mainSupportLink"
            style="font-size:11px;color:var(--text-muted);text-decoration:none;display:flex;align-items:center;justify-content:center;gap:6px">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              style="width:12px;height:12px;color:#FFDD00">
              <path
                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.84-8.84 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
              </path>
            </svg>
            Support the Project
          </a>
        </div>
      </div>

      <!-- Monitor Panel (DataLayer) -->
      <div class="panel" id="panel-monitor">
        <div class="monitor-layout">

          <!-- Left Sidebar: Page Navigation -->
          <div class="page-nav-sidebar" id="pageNavSidebar">
            <div class="page-nav-header">
              <div class="page-nav-header-title">Pages</div>
            </div>
            <div class="page-nav-list" id="pageNavList">
              <!-- Page items rendered here -->
            </div>
          </div>

          <!-- Right Content Area -->
          <div class="events-content">
            <div class="section">
              <div class="section-title"
                style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                <div style="display:flex;align-items:center;gap:8px">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    style="width:16px;height:16px">
                    <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                    <polyline points="2 17 12 22 22 17"></polyline>
                    <polyline points="2 12 12 17 22 12"></polyline>
                  </svg>
                  <span id="eventsPanelTitle">DataLayer Events</span>
                </div>
                <div style="display:flex;gap:4px">

                  <button class="btn-icon" id="exportJson" title="Export as JSON">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                      style="width:14px;height:14px">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                      <polyline points="7 10 12 15 17 10" />
                      <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                  </button>
                  <button class="btn-icon" id="exportCsv" title="Export as CSV">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                      style="width:14px;height:14px">
                      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                      <polyline points="14 2 14 8 20 8" />
                      <line x1="8" y1="13" x2="16" y2="13" />
                      <line x1="8" y1="17" x2="16" y2="17" />
                      <polyline points="10 9 9 9 8 9" />
                    </svg>
                  </button>
                </div>
              </div>
              <div style="display:flex;gap:8px;margin-bottom:12px">
                <input type="text" class="input" id="eventFilter"
                  placeholder="view_item, add_to_cart, begin_checkout, purchase..." style="flex:1">
                <button class="btn btn-secondary" id="clearEvents" title="Clear (Ctrl+L)">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    style="width:14px;height:14px">
                    <polyline points="3 6 5 6 21 6" />
                    <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" />
                  </svg>
                </button>
              </div>
              <!-- Quick Filter Chips -->
              <div id="filterChips" style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px">
                <!-- Filter chips will be rendered here -->
              </div>
            </div>

            <div class="event-list" id="eventList" style="flex:1;overflow-y:auto">
              <!-- Events will be added here -->
            </div>
          </div>
          <!-- End events-content -->
        </div>
        <!-- End monitor-layout -->
      </div>

      <!-- Network Panel -->
      <div class="panel" id="panel-network">
        <div class="section">
          <div class="section-title"
            style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <div style="display:flex;align-items:center;gap:8px">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="width:16px;height:16px">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"></path>
              </svg>
              Google Requests Only
            </div>
            <div style="display:flex;gap:4px">
              <button class="btn-icon" id="exportHar" title="Export as HAR">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:14px;height:14px">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                  <polyline points="7 10 12 15 17 10" />
                  <line x1="12" y1="15" x2="12" y2="3" />
                </svg>
              </button>
              <button class="btn btn-secondary" id="clearNetwork" title="Clear All Hits">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:14px;height:14px">
                  <polyline points="3 6 5 6 21 6" />
                  <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2" />
                </svg>
              </button>
            </div>
          </div>
          <div style="display:flex;gap:8px;margin-bottom:12px">
            <input type="text" class="input" id="networkFilter" placeholder="Filter requests (e.g. 'purchase', 'G-')..."
              style="flex:1">
          </div>
          <div id="networkStats" style="display:flex;gap:8px;margin-bottom:12px;overflow-x:auto;padding-bottom:4px">
            <!-- Stats will be injected here -->
          </div>
          <div class="event-list" id="networkList">
            <!-- Network requests will be added here -->
          </div>
        </div>
      </div>

      <!-- Audit Panel -->
      <div class="panel" id="panel-audit">
        <div class="section">
          <div class="section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
            Martech Compliance Audit
          </div>
          <button class="btn" id="runAudit" style="width:100%;margin-bottom:12px;gap:8px">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            Run Deep Scan
          </button>
          <div id="auditResults" class="container-list">
            <div class="empty-state">
              <p>Click "Run Scan" to check implementation status</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Cookies Panel -->
      <div class="panel" id="panel-cookies">
        <div class="section">
          <div class="section-header">
            <div class="section-title">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="width:16px;height:16px">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 2a10 10 0 0 1 10 10"></path>
                <path d="M12 22a10 10 0 0 1-10-10"></path>
              </svg>
              Tracking Cookies
            </div>
            <button class="btn-icon" id="refreshCookies" title="Refresh Cookies">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
              </svg>
            </button>
          </div>
          <div id="cookieList" class="container-list">
            <!-- Cookies will be added here -->
          </div>
        </div>

        <!-- Test _gcl_aw Cookie Section -->
        <div class="section">
          <div class="section-header">
            <div class="section-title">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="width:16px;height:16px">
                <path
                  d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" />
              </svg>
              Test Google Ads Click
            </div>
          </div>
          <div
            style="padding:12px;background:var(--bg-secondary);border-radius:8px;border:1px dashed var(--border-color)">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
              <span style="font-size:11px;font-weight:600;color:var(--warning-yellow)">Testing Only</span>
              <span style="font-size:10px;color:var(--text-muted)">Creates a dummy _gcl_aw cookie (GCLID)</span>
            </div>
            <div style="display:flex;gap:8px">
              <button class="btn btn-primary" id="addTestGclAw" style="flex:1;font-size:11px">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:12px;height:12px;margin-right:4px">
                  <line x1="12" y1="5" x2="12" y2="19" />
                  <line x1="5" y1="12" x2="19" y2="12" />
                </svg>
                Add Test _gcl_aw
              </button>
              <button class="btn btn-secondary" id="deleteTestGclAw" style="flex:1;font-size:11px">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:12px;height:12px;margin-right:4px">
                  <path d="M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                </svg>
                Delete _gcl_aw
              </button>
            </div>
            <p style="font-size:10px;color:var(--text-muted);margin-top:8px;line-height:1.4">
              Simulates a Google Ads click (GCLID) for testing conversion tracking. Remember to delete after testing.
            </p>
          </div>
        </div>
      </div>

      <!-- Consent Panel -->
      <div class="panel" id="panel-consent">


        <!-- CSP Checker Section -->
        <div class="section">
          <div class="section-header">
            <div class="section-title">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="width:16px;height:16px">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                <path d="M7 11V7a5 5 0 0 1 10 0v4" />
              </svg>
              CSP Compatibility Check
            </div>
            <button class="btn-icon" id="refreshCSP" title="Check CSP">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
              </svg>
            </button>
          </div>
          <p style="font-size:10px;color:var(--text-muted);margin-bottom:10px">
            Checks if the page's Content Security Policy allows Google tags to function properly.
          </p>
          <div id="cspResults" class="container-list">
            <div class="empty-state">
              <p>Click refresh to check CSP</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Tech Stack Panel -->
      <div class="panel" id="panel-tech">
        <div class="section">
          <div class="section-header">
            <div class="section-title">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="width:16px;height:16px">
                <rect x="4" y="4" width="16" height="16" rx="2" ry="2" />
                <rect x="9" y="9" width="6" height="6" />
              </svg>
              Technology Stack
            </div>
            <button class="btn-icon" id="refreshTech" title="Refresh Technologies">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
              </svg>
            </button>
          </div>
          <p style="font-size:10px;color:var(--text-muted);margin-bottom:12px">
            Detected technologies, frameworks, and tools used on this page.
          </p>
          <div id="techResults" class="container-list">
            <div class="empty-state">
              <p>Click refresh to detect technologies</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Tools Panel -->
      <div class="panel" id="panel-push">
        <div class="section">
          <div class="section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px">
              <path
                d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
              </path>
              <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
              <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
            GTM Variable Builder
          </div>
          <div class="container-list">
            <div style="display:flex;gap:8px;margin-bottom:12px">
              <button class="btn btn-secondary" id="pickElementBtn" style="flex:1;gap:6px">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:14px;height:14px">
                  <path d="M15 18l-2-2 2-2m-5-4l2-2-2-2M2 3h20v18H2V3z"></path>
                </svg>
                Pick Element
              </button>
              <button class="btn btn-secondary" id="captureHighlightBtn" style="flex:1;gap:6px">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:14px;height:14px">
                  <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
                </svg>
                From Highlight
              </button>
            </div>

            <div id="selectorResult"
              style="display:none;padding:12px;border:1px solid rgba(14, 99, 156, 0.3);background:rgba(14, 99, 156, 0.05);border-radius:10px;margin-top:12px">
              <div
                style="font-size:12px;font-weight:700;color:var(--success-green);display:flex;align-items:center;gap:8px;margin-bottom:12px">
                <div
                  style="background:var(--success-green);width:18px;height:18px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                    style="width:10px;height:10px">
                    <polyline points="20 6 9 17 4 12" />
                  </svg>
                </div>
                Element Successfully Captured
              </div>

              <div class="container-item"
                style="flex-direction:column;align-items:flex-start;padding:10px;background:var(--bg-primary);border:1px solid var(--border);border-radius:6px;margin-bottom:12px">
                <div
                  style="font-size:9px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px;display:flex;align-items:center;gap:4px">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    style="width:10px;height:10px">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                  </svg>
                  CSS Selector Path
                </div>
                <div
                  style="font-family:'JetBrains Mono', 'Consolas', monospace;font-size:11px;word-break:break-all;color:var(--accent-blue)"
                  id="pickedSelector">-</div>
              </div>

              <div
                style="font-size:11px;font-weight:600;margin-bottom:6px;color:var(--text-secondary);display:flex;align-items:center;gap:6px">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:12px;height:12px">
                  <polyline points="4 17 10 11 4 5"></polyline>
                  <line x1="12" y1="19" x2="20" y2="19"></line>
                </svg>
                1. Test Code (Verify Value)
              </div>
              <div style="position:relative;margin-bottom:8px">
                <pre class="code-block" id="pickedJsTest"
                  style="font-size:10px;background:var(--bg-secondary);padding:10px 40px 10px 10px;white-space:pre-wrap;word-break:break-all;border:1px solid var(--border);border-radius:6px;color:var(--text-muted);border-left:4px solid var(--text-muted)">console.log((function(){ ... })())</pre>
                <div style="position:absolute;top:6px;right:6px;display:flex;flex-direction:column;gap:4px">
                  <button class="btn-icon btn-small" id="runJsTest" title="Execute & Preview"
                    style="background:var(--bg-primary);padding:4px;border-radius:4px;border:1px solid var(--border);color:var(--success-green);box-shadow:0 2px 4px rgba(0,0,0,0.1)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                      style="width:12px;height:12px">
                      <polygon points="5 3 19 12 5 21 5 3" />
                    </svg>
                  </button>
                  <button class="btn-icon btn-small" id="copyJsTest" title="Copy for Console"
                    style="background:var(--bg-primary);padding:4px;border-radius:4px;border:1px solid var(--border);box-shadow:0 2px 4px rgba(0,0,0,0.1)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                      style="width:12px;height:12px">
                      <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                    </svg>
                  </button>
                </div>
              </div>

              <div id="testResultArea"
                style="display:none;margin-bottom:16px;padding:10px;background:var(--bg-console);border:1px solid var(--accent-blue);border-radius:6px;font-family:monospace;font-size:11px;border-left:4px solid var(--accent-blue)">
                <div
                  style="font-size:9px;color:var(--text-muted);text-transform:uppercase;margin-bottom:4px;display:flex;align-items:center;gap:4px">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    style="width:10px;height:10px">
                    <polyline points="16 18 22 12 16 6"></polyline>
                    <polyline points="8 6 2 12 8 18"></polyline>
                  </svg>
                  Console Output Preview
                </div>
                <div style="display:flex;gap:6px">
                  <span style="color:var(--text-muted)">Value:</span>
                  <span id="testResultValue"
                    style="color:var(--success-green);word-break:break-all;font-weight:600">-</span>
                </div>
              </div>

              <div
                style="font-size:11px;font-weight:600;margin-bottom:6px;color:var(--text-secondary);display:flex;align-items:center;gap:6px">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:12px;height:12px">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                  <polyline points="22 4 12 14.01 9 11.01" />
                </svg>
                2. GTM Trigger Creator (How to setup)
              </div>
              <div id="triggerSuggestions"
                style="padding:10px;background:var(--bg-surface);border:1px solid var(--border);border-radius:6px;margin-bottom:12px;font-size:10.5px;color:var(--text-primary);line-height:1.4">
                <div style="color:var(--text-muted);font-style:italic">Select an element to see trigger suggestions...
                </div>
              </div>

              <div
                style="font-size:11px;font-weight:600;margin-bottom:6px;color:var(--text-secondary);display:flex;align-items:center;gap:6px">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  style="width:12px;height:12px">
                  <path
                    d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" />
                </svg>
                3. GTM Custom JS Variable
              </div>
              <div style="position:relative;margin-bottom:12px">
                <pre class="code-block" id="pickedJsVar"
                  style="font-size:10px;background:var(--bg-surface);padding:10px 40px 10px 10px;white-space:pre-wrap;word-break:break-all;border:1px solid var(--border);border-radius:6px;color:var(--accent-blue);border-left:4px solid var(--accent-blue)">function() { ... }</pre>
                <button class="btn-icon btn-small" id="copyJsVar" title="Copy for GTM"
                  style="position:absolute;top:6px;right:6px;background:var(--bg-primary);padding:4px;border-radius:4px;border:1px solid var(--border);box-shadow:0 2px 4px rgba(0,0,0,0.1)">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    style="width:12px;height:12px">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                  </svg>
                </button>
              </div>


            </div>
          </div>
        </div>



        <div class="section">
          <div class="section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="12" y1="8" x2="12" y2="16"></line>
              <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
            Quick Presets
          </div>
          <div class="preset-buttons" id="presetButtons">
            <button class="preset-btn" data-preset="page_view">Page View</button>
            <button class="preset-btn" data-preset="purchase">Purchase</button>
            <button class="preset-btn" data-preset="add_to_cart">Add to Cart</button>
            <button class="preset-btn" data-preset="begin_checkout">Begin Checkout</button>
            <button class="preset-btn" data-preset="login">Login</button>
            <button class="preset-btn" data-preset="sign_up">Sign Up</button>
          </div>
        </div>

        <div class="section">
          <div class="section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
            Event Data (JSON)
          </div>
          <textarea class="json-editor" id="jsonEditor" spellcheck="false"></textarea>
          <div id="jsonError" style="color:var(--error-red);font-size:11px;margin-top:6px;display:none"></div>
        </div>

        <button class="btn" id="pushBtn" style="width:100%;gap:8px">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
            <line x1="22" y1="2" x2="11" y2="13" />
            <polygon points="22 2 15 22 11 13 2 9 22 2" />
          </svg>
          Push to dataLayer
        </button>
      </div>

      <!-- Settings Panel -->
      <div class="panel" id="panel-settings">
        <div class="section">
          <div class="section-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:16px;height:16px">
              <circle cx="12" cy="12" r="3" />
              <path
                d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
            </svg>
            App Settings
          </div>
          <div class="container-item" style="flex-direction:column;align-items:flex-start;gap:12px">
            <div style="width:100%">
              <div style="display:flex;justify-content:space-between;margin-bottom:12px">
                <span style="font-size:calc(12px * var(--font-scale));font-weight:600">Interface Scale</span>
                <span id="fontSizeValue"
                  style="font-size:calc(11px * var(--font-scale));color:var(--accent-blue);font-weight:600">Medium</span>
              </div>
              <div class="font-size-group" style="display:grid;grid-template-columns:repeat(4, 1fr);gap:6px;width:100%">
                <button class="btn btn-secondary btn-small font-size-btn" data-scale="0.85"
                  data-label="Small">Small</button>
                <button class="btn btn-secondary btn-small font-size-btn active" data-scale="1"
                  data-label="Medium">Medium</button>
                <button class="btn btn-secondary btn-small font-size-btn" data-scale="1.15"
                  data-label="Large">Large</button>
                <button class="btn btn-secondary btn-small font-size-btn" data-scale="1.3" data-label="XXL">XXL</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- About Panel -->
      <div class="panel" id="panel-about">
        <div class="section" style="text-align:center;padding:12px 10px">
          <div
            style="width:56px;height:56px;background:var(--bg-surface);border-radius:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;border:1px solid var(--border);box-shadow:0 4px 12px rgba(0,0,0,0.1)">
            <img src="../assets/icons/icon48.png" alt="Tag Master" style="width:32px;height:32px">
          </div>
          <h2 style="font-size:16px;margin-bottom:6px;color:var(--text-primary)">Tag Master</h2>
          <p style="font-size:11px;color:var(--text-secondary);line-height:1.5;margin-bottom:8px">
            üíç One Extension to Rule Them All
          </p>
          <p style="font-size:10px;color:var(--text-muted);line-height:1.5;margin-bottom:20px;font-style:italic">
            Professional toolkit for GTM Experts & Marketing Analysts.
          </p>

          <!-- Support Card for Maximum Conversion -->
          <div
            style="background:linear-gradient(135deg, rgba(14, 99, 156, 0.15) 0%, rgba(78, 201, 176, 0.15) 100%);padding:16px;border-radius:12px;border:1px solid rgba(14, 99, 156, 0.3);margin-bottom:20px;text-align:left">
            <div
              style="font-size:13px;font-weight:700;margin-bottom:8px;color:var(--text-primary);display:flex;align-items:center;gap:6px">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="width:14px;height:14px;color:#FFDD00">
                <path
                  d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.84-8.84 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                </path>
              </svg>
              Support the Project
            </div>
            <p style="font-size:10.5px;color:var(--text-secondary);line-height:1.6;margin-bottom:16px">
              Building Tag Master is a labor of love, fueled by countless hours of debugging, testing, and feature
              development.
              Every coffee you buy helps keep this tool free, powerful, and constantly evolving. Your support means the
              world and
              keeps the data layer fires burning bright! üî•
            </p>

            <!-- Buy Me a Coffee -->
            <a href="https://buymeacoffee.com/tagmaster" target="_blank" class="btn"
              style="background:#FFDD00;color:#000000;border:none;font-weight:700;width:100%;justify-content:center;gap:8px;text-decoration:none;padding:12px;font-size:12px;display:flex;align-items:center;border-radius:8px">
              <span style="font-size:16px">‚òï</span> Buy me a coffee
            </a>
          </div>

          <!-- Developer Info -->
          <div style="display:flex;flex-direction:column;gap:8px;text-align:left">
            <div
              style="display:flex;align-items:center;justify-content:space-between;padding:10px;background:var(--bg-surface);border-radius:8px;border:1px solid var(--border)">
              <div style="display:flex;align-items:center;gap:8px">
                <div style="width:8px;height:8px;background:var(--success-green);border-radius:50%"></div>
                <div style="font-size:calc(11px * var(--font-scale));font-weight:600">v1.2.0 (Stable)</div>
              </div>
              <a href="#" style="font-size:10px;color:var(--accent-blue);text-decoration:none">Changelog</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-item">
        <div class="status-dot" id="statusDot"></div>
        <span id="statusText">Active</span>
      </div>
      <div class="status-item" id="currentUrl"
        style="max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">
        Loading...
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast" style="display:none"></div>

    <!-- Confirm Delete Filter Modal -->
    <div id="confirmDeleteModal" class="modal" style="display:none">
      <div class="modal-content" style="max-width:400px">
        <div class="modal-header">
          <h3 style="margin:0;font-size:16px;font-weight:700">üóëÔ∏è Delete Filter</h3>
          <button class="btn-icon" id="closeConfirmDelete" style="margin-left:auto">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
              <line x1="18" y1="6" x2="6" y2="18" />
              <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
          </button>
        </div>
        <div class="modal-body" style="padding:20px">
          <p id="confirmDeleteMessage"
            style="margin:0 0 20px 0;color:var(--text-primary);font-size:14px;line-height:1.5"></p>
          <div style="display:flex;gap:10px;justify-content:flex-end">
            <button id="cancelDeleteBtn"
              style="padding:8px 16px;border-radius:6px;border:1px solid var(--border);background:var(--bg-secondary);color:var(--text-primary);font-size:13px;font-weight:500;cursor:pointer;transition:all 0.15s">
              Cancel
            </button>
            <button id="confirmDeleteBtn"
              style="padding:8px 16px;border-radius:6px;border:none;background:var(--error-red);color:white;font-size:13px;font-weight:500;cursor:pointer;transition:all 0.15s">
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div id="shortcutsModal" class="modal" style="display:none">
      <div class="modal-content" style="max-width:500px">
        <div class="modal-header">
          <h3 style="margin:0;font-size:16px;font-weight:700">‚å®Ô∏è Keyboard Shortcuts</h3>
          <button class="btn-icon" id="closeShortcuts" style="margin-left:auto">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
              <line x1="18" y1="6" x2="6" y2="18" />
              <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
          </button>
        </div>
        <div class="modal-body" style="padding:20px">
          <div style="display:flex;flex-direction:column;gap:16px">

            <div>
              <h4
                style="font-size:12px;font-weight:700;color:var(--text-secondary);text-transform:uppercase;margin-bottom:8px">
                Navigation</h4>
              <div style="display:flex;flex-direction:column;gap:8px">
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>1</kbd>
                  <span>GTM Panel</span>
                </div>
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>2</kbd>
                  <span>Events Panel</span>
                </div>
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>3</kbd>
                  <span>Network Panel</span>
                </div>
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>4</kbd>
                  <span>Audit Panel</span>
                </div>
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>5</kbd>
                  <span>Cookies Panel</span>
                </div>
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>6</kbd>
                  <span>Consent Panel</span>
                </div>
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>7</kbd>
                  <span>Tech Detection</span>
                </div>
              </div>
            </div>

            <div>
              <h4
                style="font-size:12px;font-weight:700;color:var(--text-secondary);text-transform:uppercase;margin-bottom:8px">
                Actions</h4>
              <div style="display:flex;flex-direction:column;gap:8px">
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>L</kbd>
                  <span>Clear Current View</span>
                </div>
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>F</kbd>
                  <span>Focus Filter</span>
                </div>
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>R</kbd>
                  <span>Refresh Panel</span>
                </div>
                <div class="shortcut-row">
                  <kbd>Ctrl</kbd> + <kbd>?</kbd>
                  <span>Show This Help</span>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="sidepanel.js"></script>
</body>

</html>